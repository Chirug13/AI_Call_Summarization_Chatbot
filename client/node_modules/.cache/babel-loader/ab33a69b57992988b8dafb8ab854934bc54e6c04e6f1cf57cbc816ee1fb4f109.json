{"ast":null,"code":"export function setupSilenceDetection(mediaRecorder, stream, onSilence) {\n  const audioContext = new AudioContext();\n  const source = audioContext.createMediaStreamSource(stream);\n  const analyser = audioContext.createAnalyser();\n  source.connect(analyser);\n  const bufferLength = analyser.frequencyBinCount;\n  const dataArray = new Uint8Array(bufferLength);\n  let silenceStart = null;\n  const checkSilence = () => {\n    analyser.getByteFrequencyData(dataArray);\n    const isSilent = dataArray.every(v => v < 5);\n    const now = Date.now();\n    if (isSilent) {\n      if (!silenceStart) silenceStart = now;\n      if (now - silenceStart > 3000) {\n        onSilence();\n        return;\n      }\n    } else {\n      silenceStart = null;\n    }\n    requestAnimationFrame(checkSilence);\n  };\n  checkSilence();\n}","map":{"version":3,"names":["setupSilenceDetection","mediaRecorder","stream","onSilence","audioContext","AudioContext","source","createMediaStreamSource","analyser","createAnalyser","connect","bufferLength","frequencyBinCount","dataArray","Uint8Array","silenceStart","checkSilence","getByteFrequencyData","isSilent","every","v","now","Date","requestAnimationFrame"],"sources":["D:/Redhats/AI_Call_Summarization_V2/client/src/audioUtils.js"],"sourcesContent":["\nexport function setupSilenceDetection(mediaRecorder, stream, onSilence) {\n  const audioContext = new AudioContext();\n  const source = audioContext.createMediaStreamSource(stream);\n  const analyser = audioContext.createAnalyser();\n  source.connect(analyser);\n\n  const bufferLength = analyser.frequencyBinCount;\n  const dataArray = new Uint8Array(bufferLength);\n\n  let silenceStart = null;\n  const checkSilence = () => {\n    analyser.getByteFrequencyData(dataArray);\n    const isSilent = dataArray.every(v => v < 5);\n    const now = Date.now();\n\n    if (isSilent) {\n      if (!silenceStart) silenceStart = now;\n      if (now - silenceStart > 3000) {\n        onSilence();\n        return;\n      }\n    } else {\n      silenceStart = null;\n    }\n    requestAnimationFrame(checkSilence);\n  };\n  checkSilence();\n}\n"],"mappings":"AACA,OAAO,SAASA,qBAAqBA,CAACC,aAAa,EAAEC,MAAM,EAAEC,SAAS,EAAE;EACtE,MAAMC,YAAY,GAAG,IAAIC,YAAY,CAAC,CAAC;EACvC,MAAMC,MAAM,GAAGF,YAAY,CAACG,uBAAuB,CAACL,MAAM,CAAC;EAC3D,MAAMM,QAAQ,GAAGJ,YAAY,CAACK,cAAc,CAAC,CAAC;EAC9CH,MAAM,CAACI,OAAO,CAACF,QAAQ,CAAC;EAExB,MAAMG,YAAY,GAAGH,QAAQ,CAACI,iBAAiB;EAC/C,MAAMC,SAAS,GAAG,IAAIC,UAAU,CAACH,YAAY,CAAC;EAE9C,IAAII,YAAY,GAAG,IAAI;EACvB,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzBR,QAAQ,CAACS,oBAAoB,CAACJ,SAAS,CAAC;IACxC,MAAMK,QAAQ,GAAGL,SAAS,CAACM,KAAK,CAACC,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC;IAC5C,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;IAEtB,IAAIH,QAAQ,EAAE;MACZ,IAAI,CAACH,YAAY,EAAEA,YAAY,GAAGM,GAAG;MACrC,IAAIA,GAAG,GAAGN,YAAY,GAAG,IAAI,EAAE;QAC7BZ,SAAS,CAAC,CAAC;QACX;MACF;IACF,CAAC,MAAM;MACLY,YAAY,GAAG,IAAI;IACrB;IACAQ,qBAAqB,CAACP,YAAY,CAAC;EACrC,CAAC;EACDA,YAAY,CAAC,CAAC;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}